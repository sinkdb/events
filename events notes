events notes

designed for legends on campus

mirror the orange peels website for this

for the prices and times, should it be a drop down menu? I guess that makes more sense

Because of all of the variations that can occur with prices, a text area will be used for that
times will still have 2 separate text boxes since there will generally be 2 different times

It feels ridiculous to have the ticket prices and ticket information separated on the form

They should be together, perhaps in a similar fashion to how I have the times?

Everything seems so cramped on the ipad version, the iphone version is going to look awful

I'll probably have to layer it like

heading
textbox
heading
textbox

all the way down the page
---------------------------------------------------------------------------------------------------

Having an events log table I suppose makes sense. So that an admin could go back and see the history of an event. When it was created, edited, or cancelled. Perhaps this will give the module the functionality to reenable an event? Should I be able to see a list of cancelled events? Maybe there needs to be an actual fleshed out admin panel to be able to do that

what dependencies will I need? 

What needs to go in the permission.php document? I guess it's everything a user can do? Judging from the hms and faxserv permissions files, that's what this is. A list of possible user actions 

---------------------------------------------------------------------------------------------------
boost stuff should be fine

Lets see if I can install this thing

it will be a broken copy of the faxmaster thing, but if it's there then its awesome

This whole time it wouldn't uninstall because the uninstall sql file didnt even exist
I'm not sure why I can't use the 'create if not exists' line. I think I read that it wasn't available in this version of psql. It might just be a mysql thing. With the limited amount of tables that I have, just always creating the table works. The uninstall sql file doesn't miss anything since there are only 2.
---------------------------------------------------------------------------------------------------
**8/19/15**
The install looks like it completes but the page load fails because something somewhere it still calling itself the faxmaster module. It populates a variable with the name faxmaster then looks for a defines.php under that name

Trying to install the faxmaster module to see what it does, since I'm basically editing it. It fails on install, and I think it's because of the same reason the other thing was failing before. I don't believe I can use the create if not exists clause. I think this is trying to run a mysql query through psql and its blowing up. I suppose I'm writing this database in postgres

I've created a blank events.php document, and now when I go to the page, it shows nothing as I would expect it to. However, when I go back to the home page of ess, it's still looking for something in the faxmaster class. 

I'm not quite sure what it's trying to display when it goes back to the home page. Whatever was broken, seems to be gone now. 

Do I need these logging files? Is logging something I've even doing?
---------------------------------------------------------------------------------------------------
**8/20/15**
What do I want to have done? There will be a lot of time devoted to this project, so I might as well set goals

I guess I just want it to start by showing a list of events, even if it's ugly
---------------------------------------------------------------------------------------------------
**8/21/15**
The index.php page for this is looking similar to the index.php page for hms. I'm taking things from faxserv, since it's the module I gutted, and from hms, because I've worked on it before. Both of them seem to create an object from somewhere. I need to trace through each of them to see what they do upon creation. I've been looking in to the tax agreement module as well, but it seems to be desgined in a different manner than the other 2 modules I'm looking at for reference. I'm looking at a plemmons medallion repo on github, and I think I'll be using this one as a reference as well. It looks like I'll be taking the route of using a controller variable and running a process on it with a factory. It will create a different one for each type of user, which are standard and admin.

It seems like I'll be having index call an events factory, and then the events factory will determine if the user is logged in or not, and generate a page based on what it needs to see

I've copied down the plm repo, and I already had the hms repo. I think these 2 will be the ones that I use for reference in creating this module. I've created a couple files, index, EventsFactory, Events, UserEvents, AdminEvents, and UserStatus. There are so many files that start branching out, using functions from everywhere.

index.php calls the factory
factory returns an object based on what type of user is present
object returned generates a view
---------------------------------------------------------------------------------------------------
**8/25/15**
I tried to launch the module just to see what happened. To no surprise, it's broken. I assume I still need to import a generous portion of other code just to display something. After adding some logic to use userstatus to check, it seems like I might have it running back in to the blank page
---------------------------------------------------------------------------------------------------
**8/28/15**
I think what I want to do today, is to start copying over the view code, and try to get it to display something. Going down the views rabbit hole is kind of insane. I might have to look up more views. The way this plm module sets up views is completely different from how hms did it. How in the hell is this efficiently done?
Jesus, the fax module doesn't even have a view class. What do I even do
Honestly, I might just lift how eric did his hangman thing, since that has a super basic implementation of views. Just jumping in to a project without getting an intro on how they do things here is really biting me
---------------------------------------------------------------------------------------------------
**9/1/15**
Views are really doing a number on me. It might be time to call in jeremy if I can't follow them. I think I want to follow the plm file the closest, because I can see where it was initialized with a null view to being with.
---------------------------------------------------------------------------------------------------
Alright, I've talked to jeremy, and he said the best thing to do is to follow the patterns from hms. 
---------------------------------------------------------------------------------------------------
**9/18/15**
I'm in the process of copying some code from the hms module and setting the view up that way. Goal is to get it to display some random null view that just echoes a single statement. We can go from there in generating other pages. 

When I'm looking at the hms code, I see something in the abstract view class that has the namespace notation on it. I wonder if that matters. Maybe I can just call it as it is? Perhaps that's because it's in another directory. 
---------------------------------------------------------------------------------------------------
**9/22/15**
I've been copying things over and I see this ajax code. Not sure what I'm supposed to be doing with it. I think it can be ignored for now? I don't remember seeing this in the versions of hms that I was working with before.

Events.php
EventsFactory.php
View.php
CommandContext.php

From what I understand, these are fine. I need to see what file needs to be made after this
---------------------------------------------------------------------------------------------------
**9/24/15**
I'm seeing some namespaces show up, is that something else that I have to deal with
---------------------------------------------------------------------------------------------------
**9/25/14**
Error I'm running in to shows that Command.php needs to be created

I've been fixing small errors here and there. I think I'm almost at a point where I can have it display a neutral view without actually doing anything? I'm hoping I can bind a template to it by next week sometime
---------------------------------------------------------------------------------------------------
**9/28/15**

Where was I last time. There was another fatal error showing up in the userView class. Probably because it doesn't exist.

It's displaying an empty page now, but I can't seem to get a line of text to just show up somewhere. 
All I need is a line of text to appear so I can see what I'm working with. I don't quite know if it's really using the template files that I have set up, or if it's just displaying blank.

THat's where I was last time. I was working with the adminEvents page to get it to display something there. I need to follow the adminHMS file and the showadminmaintenancemenu class to get it to work
---------------------------------------------------------------------------------------------------
**9/29/15**
Now that I can print out a blank view page with a heading, I need to print out a table using pdo. I think that will be my next step.
---------------------------------------------------------------------------------------------------
**10/1/15**
Now to trace hms code to see how it interacts with the database. I also need to see the commands and how things are generated
---------------------------------------------------------------------------------------------------
**10/2/15**
Yesterday I was so tired that I couldn't actually do anything. I wonder what page I need to look at to ensure I connect to the database properly. Probably something like the profile, since that has the auto populated thing. That's similar to what I want. Either that, or something similar to search results, since I want a table. 
---------------------------------------------------------------------------------------------------
**10/5/15/**
Now we begin tracing. I've got the roommate profile open. I think the search results for profiles might be better, since that has a varying amount of things that can show up. I'll need to use that logic to show all events that are past a certain date
---------------------------------------------------------------------------------------------------
**10/6/15**
Is this all the command stuff that I need?

command
command factory
command context
---------------------------------------------------------------------------------------------------
**10/7/15**
In the showhomecommand file, I think I have to have a file called homeview.php, and call that thing with the phpws_core init thing. I'm not sure if that will solve my issue of it thinking command should be in the same directory though. 
---------------------------------------------------------------------------------------------------
**10/12/15**
I've traced through a couple more things and created some new classes. I did see that it was looking for command in the wrong place, because it wasn't appending the entire filename. 
---------------------------------------------------------------------------------------------------
**10/13/15**
So far I've traced events, command context, and command factory. I think next is to move on to show home command, along side show admin maintenance menu command
---------------------------------------------------------------------------------------------------
**10/30/15**
Made some progress. Can't believe the problem was that I had an extra 'm' in a file name. That's so ridiculous. I'm in to a new set of errors though. It either tells me that the argument passed in to the execute method is of the wrong type, or that it can't be converted in to a string.

'command\\'.

Adding that seems to change it. Time to do more tracing I guess.

It doesn't error anymore. It uses a command to display something now. Admin events executes the userview and that generates a template

When I have it call the show events method, I think it's adding the homeview and the events tpl together. I'm pretty sure that's why it's duplicating the divs.
---------------------------------------------------------------------------------------------------
**11/5/15**
What makes it duplicate the divs? Something is adding the HomeView.tpl label to the template array twice. I'm not sure why. I created this file directly after the other one, and it only added a single time. I would think it would add homeview.tpl and user.tpl, because in my other experience with templates, it added multiple things. I just confirmed that it's indeed the same thing duplicated, beacuse I only changed the one instance of the string, and both labels changed.
---------------------------------------------------------------------------------------------------
**11/6/15**
I've been looking at some of the different template files. What causes some of them to call a show method, versus returning a template using the process method? 
---------------------------------------------------------------------------------------------------
**11/11/15**
When I have the process statement on the page, it displays the line of text twice, but when I have the return statement, it doesn't display anything. I need to find out the difference between the two. HMS uses both.
---------------------------------------------------------------------------------------------------
**11/17/15**
It seems like the showHMS method is only used in 3 places. One of which is where the method is declared, so it's really only called twice. It's called in either userview, or guestview. So it looks like that method is what differentiates a guest from a logged in user? Time to see what calls userview.php or guestview.php

userhms and adminhms call userview.php
guesthms calls guestview.php

these are called from the hmsfactory, depending on the userstatus class

my factory should just call a single thing right now
---------------------------------------------------------------------------------------------------
**1/11/16**
The last thing in my notes was that my factory should just return a single thing, and it looks like it does now. I haven't solved whatever it was that makes things either print twice or not at all though. HMS has 3 files, HomesteadView, UserView, and GuestView. Each of these have a corresponding tpl file. 

I noticed that in homesteadview, it sets the main variable, where I was setting a content variable. I ignore sidebar and layout stuff. Other than that, it seems fine.

I have a userview class, but no guestview. 

the class header might be different in userview for events. 
---------------------------------------------------------------------------------------------------
**1/12/16**
showhomecommand->events.php->adminevents.php->index.php->
adminevents->index->

When I remove the view->show() from admin events, it only shows the content a single time.

3 separate classes. UserEvents, AdminEvents, and GuestEvents. I assume they will each have a corresponding view class

Show method on view ran after the notifications are added. Is that a product of the notifications? Should that be left out because I ignore notifications?

I notice I'm missing a couple files. I only have an admin events, no user or guest. I only have a user view. But it looks like hms only uses the userview

userhms, userview, userstatus
adminhms, 
guesthms, guestview

showhomecommand(show16)->events(execute)->adminevents(process)->index(process)

I think I had the order backwards

vagrant index calls execute on phpwebsite controller, 
phpwebsite controller calls execute on the compatibility module, 
compatibility module opens events/index, 

events/index calls eventsfactory which returns adminevents then calls process on adminevents, 
adminevents calls process on events, 
events calls execute on showhomecommand, 
showhomecommand calls show on homeview

in the showhomecommand file, the content has the HomeView.tpl string in it.

It only displays a single time now. I'm not sure what makes it different from HMS, but it is. I suppose now I integrate the db class to grab something from the database and display it on the page.

Random line of data has been inserted in to the database. The first event is a year from today, the second event is a year old, meaning only the first one should show up.

I suppose I'll model the search after the search roommate profiles page? I'll be pulling up a list of all events that occur at a time after the start of the current date at midnight.

1452556800
1452643200
1452729600

86400 is the amount of seconds in a day
---------------------------------------------------------------------------------------------------
**1/13/16**
I think today I need to make sure userevents and guestevents fire off correctly

AdminEvents will use ShowAdminHomeCommand, UserEvents will user ShowUserHomeCommand, GuestEvents will use ShowGuestHomeCommand

Take that back, there will only be admins or guests. I have it switching between the guest template and the admin template based on what the isAdmin function returns. 
---------------------------------------------------------------------------------------------------
**1/14/16**
returning a line from the database is the priority here. I guess I'll work on the guest version first.

Alright, it looks I'm doing something wrong? Maybe I should have always modeled this after the search functions

RoomateProfileSearchForm, RoomateProfileSearchView, RoomateProfileSearchCommand

Where do I go from here? Do I restructure the admin and guest views? Maybe this is why that previous return statement didn't do anything. Maybe I didn't go far enough down in the hierarchy to add anything.

The label works at least. I can see the word test and a label for it when I var_dump the $form variable. It doesn't appear though

Even though I have it displaying admin or guest, I don't think it's displaying it the right way. Where did I even pull that method from? The one that I currently use to display the list label

Maybe I can circumvent this by having it call a second file that does the pager stuff and just returns it. Like have guestview call get events which extends the pager and sends back just a block of event data and adds it to the form.
---------------------------------------------------------------------------------------------------
**1/15/16**
This isn't technically a form, is it? There will be no points for data entry, the only thing this will do is display data. I'm not worried about changing whatever shows up on screen, I just want it to show up first.

It tells me that GuestView is a class that it can't find. But the line telling me that is in the GuestView class? I went through to find the DBPager class. It's not required to have a class filled in, as it automatically sets it to null if there isn't one provided. So I think that gets me one step closer. It looks as if it's still returning nothing though. For the addwhere clause, I only need a column and a value.

I think it's connecting to the right table. The count it returned was correctly two. I'll add another entry and count again. It's correct.

I have the right table, and it counts it, but I can't access the ids. Changed it to where it matches by name, and it should match to test, which does exist in the table.

Did a little bit of reading over the DBPager and form classes in the core folder. I think I need to do some more of that so I'm more familiar with that methods are available to me

---------------------------------------------------------------------------------------------------
**1/21/16**

Eric brought up a good point. Why don't I just use pdo instead of messing around with the pager classes? That should be easier to implement.

It was a ton easier to implement. I have a result variable that holds all the events. I have it only pulling events that are greater than the current datestamp. 

There's an interesting problem though. Will the date picker choose the timestamp as if it were 00:00? I suppose I could add 86399 to the date if its represented at 00:00, which would mean it's the very last possible second in the day.

That was a really dumb way to get the current timestamp. The time() function gets it and I don't have to access an array to do it.

Now that the array shows up when I vardump, I have to get it to replicate rows and fill out each thing. I'm still not quite sure how I'm going to use the images. There's an image id field, but it's not clear to me how it will be used. I think theres another module out there that I will have to use.

More template stuff is what I'll have to do
---------------------------------------------------------------------------------------------------
**1/27/16**
the time function returns the current time as a unix stamp, which is sort of what I want. I think I can mitigate this with the adding of a couple hours worth of seconds. 4-6 hours perhaps should do it. That actually won't do it. That only keeps the event up until 6am. I think I'll have to add the original idea of 86399 to it. Yeah I'm fairly sure that the 4-6 hours idea I discussed with eric won't. That means the events posted for today, would only be listed until 6am the day of, at best. With adding an entire days worth of seconds to it, the event will only be listed until one second before midnight that night. So if someone logs on, they can see all events that have happened, and will happen that day
---------------------------------------------------------------------------------------------------
**1/28/16**
Internship inventory is what I'm looking at now. There's gotta be something here that uses pdo to populate a list of things, right?

We're getting somewhere. It's displaying things in an unformatted list

{eventname} {eventlocation} {ticketlocation} {opentime} {starttime}<br />

I don't think I need that line above anymore, because I have it displaying things in a basic table now

Looking forward, I know this information is broken up in to each named tag, but how will I get it to display like it does on uxpin

I need to further format the date. Now that I can convert the timestamp to a readable date, then build a string that takes out whatever I need, I should be fine

php datetime formats
---------------------------------------------------------------------------------------------------
**1/29/16**
Is there a better way to deal with the date formatting than what I'm doing? It's an entire loop that takes place after I populate the tpl variable
---------------------------------------------------------------------------------------------------
**2/2/16**
Going to try to replicate a div in this and see what happens

I'm pretty sure that's what I'll have to do


<table class="table">
	<thead>
		<th>Event Name</th>
		<th>Event Location</th>
		<th>Event Date</th>
		<th>Doors Open</th>
		<th>Show Start</th>
	</thead>
	<tbody>
		<tr>
			<td>{eventname}</td>
			<td>{eventlocation}</td>
			<td>{eventdate}</td>
			<td>{opentime}</td>
			<td>{starttime}</td>
		<tr>
			</tbody>
</table>
---------------------------------------------------------------------------------------------------
**2/4/16**
It's replicating events in divs currently. I think I need to get the image to be a fixed size, and try to do the text overlay
Next is to add a details button
Then move to the admin version that has an edit button
---------------------------------------------------------------------------------------------------
**2/5/16**
There is a details button now, but I need to get it to work. I assume what will happen, is I'll pass the id and grab things from the database
---------------------------------------------------------------------------------------------------
**2/10/16**
